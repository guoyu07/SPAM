<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">	
    <title>Chapter 3 - Listing 3.5</title>
	<link rel="stylesheet" href="../sencha/touch-1.0.2/resources/css/sencha-touch.css" type="text/css">
	<script type="text/javascript" src="../sencha/touch-1.0.2/sencha-touch-debug.js"></script>    

	<script type="text/javascript">
	/*
		Sample code for card layout + navigation
	*/

		Ext.setup({
		    glossOnIcon: false,
		    icon: 'icon.png',
			tabletStartupScreen: 'tablet_startup.png',
		    phoneStartupScreen: 'phone_startup.png',

		    onReady: function() {
			
		        var handleNavigation = function(btn) {
					// get the active card from the panel
					var currentPanel = myPanel.getActiveItem();
					
					// figure out the index of the active panel
					// we do this to handle navigating to the next item, and to handle wrapping
					var indexOfCurrentPanel = myPanel.items.items.indexOf(currentPanel);
					var newIndex;

					// if the back button was pressed, move to the previous card, or the last card
					if (btn.text == "Back") {
						var newIndex = indexOfCurrentPanel > 0 ? 
							indexOfCurrentPanel-1 : myPanel.items.length-1;
				 	}
					// if the forward button was pressed, move to the next card, or the first card
					else {
						var newIndex = indexOfCurrentPanel < myPanel.items.length-1 ? 
							indexOfCurrentPanel+1 : 0;
					}

					// set which card is the active one
					myPanel.setActiveItem(newIndex);
					
				} // end handleNavigation()

				// instantiate the panel that contains the cards
				var myPanel = new Ext.Panel({
					fullscreen: true,
					layout: 'card',
					cardSwitchAnimation: 'cube',
					activeItem: 1,					// set "card 2" as the active card
					dockedItems: [
					   {
							xtype: 'toolbar',
							dock: 'top',
							title: 'Card Layout',
							items: [
						   		{
									text: 'Back',
									ui: 'back',
									handler: handleNavigation
						   		},
						   		{xtype: 'spacer'},  // space the two buttons apart
						   		{
									text: 'Forward',
									ui: 'forward',
									handler: handleNavigation
				 		   		}
							]
					   }
					], // end dockedItems
					defaults: {
						style: "background-color: #960000;"
					},
					items: [
						{ html: 'Card 1' },
						{ html: 'Card 2' },
						{ html: 'Card 3' }
					]
				}); // end myPanel
				
		    } // end onReady()
		}); // end setup()

	</script>
</head>
<body></body>
</html>