<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">	
    <title>Chapter 3 - Listing 3.7</title>
	<link rel="stylesheet" href="../sencha/touch-1.0.2/resources/css/sencha-touch.css" type="text/css">
	<script type="text/javascript" src="../sencha/touch-1.0.2/sencha-touch-debug.js"></script>    

	<script type="text/javascript">
	/*
		Sample code for - Mixed Layouts (HBOX + ??)

		Make this a bit more of a useful example.
		Hbox with 3 columns, each containing something with another layout?
	*/

		Ext.setup({
		    glossOnIcon: false,
		    icon: 'icon.png',
			tabletStartupScreen: 'tablet_startup.png',
		    phoneStartupScreen: 'phone_startup.png',

		    /**
		     * This is called automatically when the page loads. 
		     */
		    onReady: function() {			
				// handle the card navigation
				var handleNavigation = function(btn) {
					// get a reference to the card panel, and get the active card that is currently shown
					var currentPanel = myPanel.down("#cardPanel").getActiveItem();
					
					// figure out the index of the active card
					var indexOfCurrentPanel = myPanel.down("#cardPanel").items.items.indexOf(currentPanel);
					var newIndex;

					// if the back buttons is pressed
					if (btn.text == "Back") {
						var newIndex = indexOfCurrentPanel > 0 ? 
							indexOfCurrentPanel-1 : myPanel.down("#cardPanel").items.length-1;
					}
					// if the forward button is pressed
					else {
						var newIndex = indexOfCurrentPanel < myPanel.down("#cardPanel").items.length-1 ? 
							indexOfCurrentPanel+1 : 0;
					}

					// get a reference to the card panel, and set the active card
					myPanel.down("#cardPanel").setActiveItem(newIndex);
				}
				
				
				var myPanel = new Ext.Panel({
				    fullscreen: true,
					layout: 'vbox',
					defaults: {
						width: '100%',
						flex: 1
					},
					items:[
						{
							itemId: "cardPanel",
							layout: 'card',
							cardSwitchAnimation: 'slide',
							dockedItems: [{
								xtype: 'toolbar',
								dock: 'top',
								title: 'Nested Layouts',
								items: [
									{
										text: 'Back',
										ui: 'back',
										handler: handleNavigation
									},
									{xtype: 'spacer'},
									{
										text: 'Next',
										ui: 'forward',
										handler: handleNavigation
									}
								] 
							}], // end dockedItems
							items: [
								{ html: 'Card 1' },
								{ html: 'Card 2' },
								{ html: 'Card 3' }
							]
						}, // end cardPanel
						{
							layout: 'hbox',
							style: 'border: 1px solid blue;',
							defaults: {
								style: "border: 1px solid red;",
								height: "100%",
								flex: 1
							},
							items: [
								{ html: 'Panel (0, 0)' },
								{ html: 'Panel (1, 0)' },
								{ html: 'Panel (2, 0)' }
							]
						}, // end row 1
						{
							layout: 'hbox',
							style: 'border: 1px solid blue;',
							defaults: {
								style: "border: 1px solid red;",
								height: "100%",
								flex: 1,
							},
							items: [
								{ html: 'Panel (0, 1)' },
								{ html: 'Panel (1, 1)' },
								{ html: 'Panel (2, 1)' }
							]
						} // end row 2
					] // end items
				}); // end myPanel
				
				
				
		    } // end onReady()
		}); // end setup()

	</script>
</head>
<body></body>
</html>